import{d as l,G as D,o as v,e as I,a as d,b as r,w as i,u as s,F as B,I as f,c as g,f as b,H as P}from"./app-f6caa0b8.js";import{a as F,d as w,c as x,b as G,e as R}from"./toast.esm-7e3cf0c6.js";import{s as o}from"./button.esm-1a340f37.js";import"./chart.esm-f817c050.js";const O={class:"max-w-[99.9%] m-auto p-2"},j={class:"flex flex-col"},q=d("label",{for:"nombre_actividad"},"Nombre Act. Transversal",-1),z=d("div",{class:"confirmation-content flex justify-center items-center"},[d("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}}),d("span",null,"Â¿Esta seguro de eliminar los registro(s) seleccionado(s)?")],-1),Q={__name:"ActsTransversales",props:{registrosTransversales:{type:Array,required:!0}},setup(A){const k=l({global:{value:null,matchMode:P.CONTAINS}}),E=l(),c=l(!1),m=l(null),n=l(),p=D(),y=l([]),C="No se encontraron datos",u=l(!1),T=a=>{a.data},V=a=>{},U=()=>{c.value=!0},$=()=>{const a={nombre_evento:m.value};f.Inertia.post("/registrar-act-transversal",a,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{c.value=!1,p.add({severity:"success",summary:"Exito",detail:`Evento ${m.value} agregado exitosamente`,life:7e3})}})},N=a=>{let{newData:e}=a;const t={id:e.id,nombre_evento:e.nombre_evento};f.Inertia.post(`/editar-act-transversal/${e.id}`,t,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{p.add({severity:"success",summary:"Exito",detail:"Editado correctamente",life:3e3})}})},_=()=>{const a={id:n.value.map(e=>e.id)};f.Inertia.post("/eliminar-act-transversal",a,{preserveState:!0,preserveScroll:!0,onSuccess:()=>{u.value=!1,n.value=null,p.add({severity:"success",summary:"Exito",detail:"Eliminado exitosamente",life:3e3})}})},h=()=>{u.value=!0};return(a,e)=>(v(),I(B,null,[d("div",O,[r(s(F),{class:"mb-4"},{start:i(()=>[a.is("Resumen-registrar || Administrador || SecretarioAcademico")?(v(),g(s(o),{key:0,label:"Registrar nueva Act. Transversal",icon:"pi pi-plus",severity:"success",class:"!mr-3",onClick:U})):b("",!0),a.is("Resumen-eliminar || Administrador || SecretarioAcademico")?(v(),g(s(o),{key:1,label:"Eliminar",icon:"pi pi-trash",severity:"danger",onClick:h,disabled:!n.value||!n.value.length},null,8,["disabled"])):b("",!0)]),end:i(()=>[r(s(o),{label:"Excel",icon:"pi pi-upload",severity:"help",onClick:e[0]||(e[0]=t=>a.exportCSV(t))})]),_:1}),r(s(G),{value:A.registrosTransversales,ref_key:"dt",ref:E,class:"p-datatable-sm",showGridlines:"",stripedRows:"",paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50],selection:n.value,"onUpdate:selection":e[1]||(e[1]=t=>n.value=t),onRowSelect:T,onRowUnselect:V,filters:k.value,emptyMessage:C,editingRows:y.value,"onUpdate:editingRows":e[2]||(e[2]=t=>y.value=t),editMode:"row",onRowEditSave:N},{default:i(()=>[r(s(w),{selectionMode:"multiple",headerStyle:"width: 3rem"}),r(s(w),{field:"nombre_evento",header:"Nombre Act. Transversal",sortable:""},{editor:i(({data:t,field:S})=>[r(s(x),{modelValue:t[S],"onUpdate:modelValue":M=>t[S]=M},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a.is("Resumen-editar || Administrador || SecretarioAcademico")?(v(),g(s(w),{key:0,rowEditor:!0,style:{width:"10%","min-width":"8rem"},bodyStyle:"text-align:center"})):b("",!0)]),_:1},8,["value","selection","filters","editingRows"])]),r(s(R),{visible:c.value,"onUpdate:visible":e[5]||(e[5]=t=>c.value=t),style:{width:"400px"},header:"Registrar Act. Transversal",modal:!0},{footer:i(()=>[r(s(o),{label:"Cancelar",icon:"pi pi-times",text:"",onClick:e[4]||(e[4]=t=>c.value=!1)}),r(s(o),{label:"Registrar",icon:"pi pi-check",text:"",onClick:$})]),default:i(()=>[d("div",j,[q,r(s(x),{id:"nombre_actividad",modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value=t)},null,8,["modelValue"])])]),_:1},8,["visible"]),r(s(R),{visible:u.value,"onUpdate:visible":e[7]||(e[7]=t=>u.value=t),style:{width:"400px"},header:"Confirmar",modal:!0},{footer:i(()=>[r(s(o),{label:"Cancelar",icon:"pi pi-times",text:"",onClick:e[6]||(e[6]=t=>u.value=!1)}),r(s(o),{label:"Eliminar",icon:"pi pi-check",text:"",onClick:_})]),default:i(()=>[z]),_:1},8,["visible"])],64))}};export{Q as default};
